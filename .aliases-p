[ -x /usr/bin/pacman ] || return

h=yay
m=/etc/pacman.d/mirrorlist

alias ac="$h -Sc"
alias af="pacman -Ql"
alias ai="$h -S --needed"
alias al="pacman -Q | grep -i"
alias an="$h -Si"
alias ao="$h -c"
alias ar="$h -Rs"
alias au="$h -Syu --devel"

aa () { rr -k $m; echo "Server = https://archive.archlinux.org/repos/$(date +%Y/%m/%d)/\$repo/os/\$arch" | sudo tee $m; }
ag () { sed -nr -e "s/^\[(.{10}).*started/?\1/p" -e "s/.*\] installed ([^ ]*).*/\1/p" /var/log/pacman.log | tr "\n" " " | tr ? "\n" | grep -E ".{12}" | grep $1; }
am () { rr -k $m; sudo reflector --country ${1:-CA} --sort rate --verbose --save $m; }
as () { l=$($h -Ss --topdown $1 | perl -0pe "s/ *\n +/ - /g" | sed "s/\// /"); { grep Installed <<< $l && echo; grep -v Installed <<< $l; } | le -X; }

# makepkg -si # base-devel
# pacman -R $(comm -23 <(pacman -Qq | sort) <(for i in $(pacman -Qqg base); do pactree -ul "$i"; done | sort -u))

# vim: filetype=sh
