[ -x /usr/bin/pacman ] || return

h=paru
m=/etc/pacman.d/mirrorlist

alias ac="$h -Sc"
alias ai="$h -S --needed"
alias al="pacman -Q | grep -i"
alias an="$h -Si"
alias ao="$h -c"
alias ar="$h -Rs"
alias au="$h -Syu --devel"

aa () { rr -k $m; echo "Server = https://archive.archlinux.org/repos/$(date -d $1 +%Y/%m/%d)/\$repo/os/\$arch" | sudo tee $m; au -yu; }
ag () { sed -nr -e 's/^\[(.{10}).*started/?\1/p' -e 's/.*\] installed ([^ ]*).*/\1/p' /var/log/pacman.log | tr '\n' ' ' | tr '?' '\n' | grep $1; }
am () { rr -k $m; reflector --country ${1:-CA} | grep ^Server | sudo tee $m; }
as () { l=$($h -Ss $1 | perl -0pe 's/ *\n +/ - /g' | sed 's/\// /'); { grep Installed <<< $l && echo; grep -v Installed <<< $l; } | le -X; }
az () { p=$(hr $1 | grep zst$ | sort -V | tail -1); read -p $p; curl -#O $1/$p; paru -U $p; rr $p; }
dn () { sudo vi -d $1{,.pacnew}; }

# comm -23 <(pacman -Qqe | sort) <(for i in base $(pacman -Qgq base-devel); do pactree -u $i; done | sort -u)
# makepkg -si # base-devel
# pacman -S archlinux-keyring

# vim: filetype=sh
