#!/bin/bash

set -e

if [ "$1" == -i ]; then
    shift

    s=$(pactl -f json info | jq -r .default_source_name)

    if [ "$1" ]; then
        if [ "$1" == -t ]; then
            pactl set-source-mute $s toggle
        else
            pactl set-source-volume $s $1%
        fi
    else
        pactl -f json list sources | jq -r '.[].volume."front-left".value_percent'
    fi
elif [ "$1" == -h ]; then
    echo -e 'output\n-i: input\n\n-t: toggle'
else
    s=$(pactl -f json info | jq -r .default_sink_name)

    if [ "$1" ]; then
        if [ "$1" == -t ]; then
            pactl set-sink-mute $s toggle
        else
            pactl set-sink-volume $s $1%
        fi
    else
        pactl -f json list sinks | jq -r '.[].volume."front-left".value_percent'
    fi
fi
