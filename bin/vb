#!/bin/bash

case $1 in
    -0)
        $0 -r | grep . && read && $0 -r | cut -d ' ' -f 1 | xargs -n 1 $0 -s ;;
    -b)
        vboxmanage controlvm $2 acpipowerbutton ;;
    -d)
        $0 -n $2; read -p '> ' s; vboxmanage snapshot $2 delete $s ;;
    -g)
        vboxmanage startvm $2 --type gui ;;
    -h)
        vboxmanage startvm $2 --type headless ;;
    -i)
        vboxmanage showvminfo $2 | less ;;
    -n)
        vboxmanage snapshot $2 list ;;
    -l)
        vboxmanage list -s vms ;;
    -p)
        vboxmanage controlvm $2 poweroff ;;
    -r)
        vboxmanage list runningvms | sort ;;
    -s)
        vboxmanage controlvm $2 savestate ;;
    -t)
        vboxmanage snapshot $2 take $(date +%F) ;;
    *)
        echo '-0: save running
-b vm: powerbutton
-d vm: delete snapshot
-g vm: gui
-h vm: headless
-i vm: info
-l: list
-n vm: list snapshots
-p vm: poweroff
-r: running
-s vm: save
-t vm: take snapshot'
        exit 1 ;;
esac
