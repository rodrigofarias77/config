#!/bin/bash

[ -z "$2" ] && echo -e "name\n
-c: capitalize
-f: sanitize
-l: lower case
-r: regex
" && exit 1

c=$(type -p perl-rename prename | head -1)

ry () { $c -n "$@" || exit 1; read -p '? ' r; [ "$r" = y ] && $c -v "$@"; }

case $1 in
-c)
    ry 's/\b[a-z]/\u$&/g' "${@:2}" ;;
-f)
    ry 's/[^-+.0-9a-z]//gi' "${@:2}" ;;
-l)
    ry 'y/A-Z/a-z/' "${@:2}" ;;
-r)
    ry "s/$2/$3/gi" "${@:4}" ;;
*)
    mv -iv "$2" "$1.${2##*.}" ;;
esac
