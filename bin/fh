#!/bin/bash

p=~/.mozilla/firefox/*.default

ry () { read -p "? " r; [ "$r" = y ]; }
sd () { s="sqlite3 $p/${1}.sqlite"; $s "select * $2" && ry && $s "delete $2"; }

sd places "from moz_places where foreign_count = 0 and ifnull(last_visit_date, 0) < $(date -d '-30 days' +%s)000000"

sd cookies "from moz_cookies where lastaccessed < $(date -d '-7 days' +%s)000000"

du -hs $p/storage && ry && rr -z $p/storage
