uname -o | grep -q Cygwin || return

export CYGWIN=winsymlinks:native

uname -m | grep -q x86_64 && au=setup-x86_64.exe || au=setup-x86.exe

cb=/dev/clipboard

alias fd='fd -c never --path-separator=/'
alias oo=cygstart

au () { cd ~/cygwin || return; curl -Os -z $au https://cygwin.com/$au; oo $au -M; }
cb () { [ -e "$1" ] && cat "$1" > $cb || cat $cb > "$1"; }
dc () { vim -d "$1" <(cat $cb); }
ev () { l=$(wevtutil qe ${1:-application} /c:${2:-1000} /f:text /rd:true | tr -d '\r' | perl -0pe 's/.*?Source: (.*?)\n.*?Date: (.*?)T(.*?)\n.*?Level: (.*?)\n.*?Description: \n(.*?)\n+/\2 \3 - \4 - \1 - \5\n/gs'); echo "$l" | le; }
ml () { mv "$1" "${1,,}"; }
pk () { pp $1 | cut -c 27-34 | xargs -rp -n 1 taskkill /f /pid; }
pp () { tasklist /v | grep -i $1 | cut -c 1-118,144-182; }
up () { systeminfo | grep 'Boot Time' | tr -s ' '; }
tb () { tp $1 > $cb; }
vc () { t=/tmp/vc-$(date +%s).${1:-txt}; cat $cb > $t; vim $t; cat $t > $cb; rr -z $t; }

# vim: filetype=sh
